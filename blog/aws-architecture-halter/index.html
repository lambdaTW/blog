<!doctype html><html lang=en><head><title>AWS Architecture Study Halter :: Lambda</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="簡介 Halter 提供遠端管理農場的軟體，他們使用一個叫 Collar 的東西放在牛身上
用太陽能為能源 有 GPS 可以發出聲響以及震動 (驅動牛去某個地方) 觀測牛隻健康 有 APP 讓農夫建立虛擬柵欄
AWS 的架構 Collar 使用 wifi, MQTT 以及 IoT Core 將資料送到雲端 除了 wifi 以外，他們使用了 LoRa 協定，將資料送到 station 再由其送至 AWS EC2 上面的資料都會用 binary 的方式送到 Kinesis (由於有兩個 source 所以可能會重複) 去除重複資料後，利用 Lambda 並解成 JSON 格式後送到另一個 Kinesis 利用 Kinesis 做 Data aggregation (by GEO index) 將上面整理好的資料存到 S3 (此處利用農場 ID 當作 partition key) 當使用者要求牛群資料時，會傳送需求到 ECS ECS 傳送運算需求給 Athena 做運算 (十秒可以處理兩千五百萬筆資料) 完成後，ECS 從 S3 獲取 Athena 運算完成的資料，整理後傳給使用者 Key Notes LoRa 可以傳送好幾公里，其資料率可以從 27 Kbps 到 0."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/blog/aws-architecture-halter/><link rel=stylesheet href=/style.css><link rel="shortcut icon" href=/img/theme-colors/orange.png><link rel=apple-touch-icon href=/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="AWS Architecture Study Halter"><meta property="og:description" content="簡介 Halter 提供遠端管理農場的軟體，他們使用一個叫 Collar 的東西放在牛身上
用太陽能為能源 有 GPS 可以發出聲響以及震動 (驅動牛去某個地方) 觀測牛隻健康 有 APP 讓農夫建立虛擬柵欄
AWS 的架構 Collar 使用 wifi, MQTT 以及 IoT Core 將資料送到雲端 除了 wifi 以外，他們使用了 LoRa 協定，將資料送到 station 再由其送至 AWS EC2 上面的資料都會用 binary 的方式送到 Kinesis (由於有兩個 source 所以可能會重複) 去除重複資料後，利用 Lambda 並解成 JSON 格式後送到另一個 Kinesis 利用 Kinesis 做 Data aggregation (by GEO index) 將上面整理好的資料存到 S3 (此處利用農場 ID 當作 partition key) 當使用者要求牛群資料時，會傳送需求到 ECS ECS 傳送運算需求給 Athena 做運算 (十秒可以處理兩千五百萬筆資料) 完成後，ECS 從 S3 獲取 Athena 運算完成的資料，整理後傳給使用者 Key Notes LoRa 可以傳送好幾公里，其資料率可以從 27 Kbps 到 0."><meta property="og:url" content="/blog/aws-architecture-halter/"><meta property="og:site_name" content="Lambda"><meta property="og:image" content="img/favicon/%!s().png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="architecture"><meta property="article:published_time" content="2022-11-06 20:30:18 +0800 +0800"></head><body><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Terminal</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=/categories/>Categories</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=/categories/>Categories</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=/blog/aws-architecture-halter/>AWS Architecture Study Halter</a></h1><div class=post-meta><time class=post-date>2022-11-06 ::</time></div><span class=post-tags>#<a href=/tags/architecture/>architecture</a>&nbsp;</span><div class=post-content><div><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/j-lPgPGBTwQ style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=簡介>簡介<a href=#簡介 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Halter 提供遠端管理農場的軟體，他們使用一個叫 <code>Collar</code> 的東西放在牛身上</p><ul><li>用太陽能為能源</li><li>有 GPS</li><li>可以發出聲響以及震動 (驅動牛去某個地方)</li><li>觀測牛隻健康</li></ul><p>有 APP 讓農夫建立虛擬柵欄</p><h2 id=aws-的架構>AWS 的架構<a href=#aws-的架構 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><img src=/img/2022/11/HalterAWSArchitecture.png alt="Halter AWS Architecture"></p><ul><li><code>Collar</code> 使用 wifi, MQTT 以及 IoT Core 將資料送到雲端</li><li>除了 wifi 以外，他們使用了 LoRa 協定，將資料送到 station 再由其送至 AWS EC2</li><li>上面的資料都會用 binary 的方式送到 Kinesis (由於有兩個 source 所以可能會重複)</li><li>去除重複資料後，利用 Lambda 並解成 JSON 格式後送到另一個 Kinesis</li><li>利用 Kinesis 做 Data aggregation (by GEO index)</li><li>將上面整理好的資料存到 S3 (此處利用農場 ID 當作 partition key)</li><li>當使用者要求牛群資料時，會傳送需求到 ECS</li><li>ECS 傳送運算需求給 Athena 做運算 (十秒可以處理兩千五百萬筆資料)</li><li>完成後，ECS 從 S3 獲取 Athena 運算完成的資料，整理後傳給使用者</li></ul><h3 id=key-notes>Key Notes<a href=#key-notes class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>LoRa 可以傳送好幾公里，其資料率可以從 27 Kbps 到 0.3 Kbps</li><li>很多服務使用者其實可以等待</li></ul></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>