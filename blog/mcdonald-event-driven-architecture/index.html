<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>McDonald Event Driven Architecture | Lambda</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="簡介 麥當勞，就是早餐滿福堡很好吃的那家，不服來辯
Event Driven Architecture 用於哪些系統 mobile-order progress tracking and sending marketing communications
很明顯都是很經典的應用情境，包含點餐進度追蹤和寄送一些商用訊息
Components 比較特別的是他們有工程友善的 SDK 去處理訊息，包括 schema 檢查，訊息寄送，錯誤處理等等
架構 外部訊息經過 Event Gateway 處理權限驗證等 (此處沒有說明怎樣辦到的) 經過驗證的外部訊息以及內部訊息都會打到 Producer 上面 Producer SDK 經過 Schema validation 後送到 Primary Topic 上 沒過送 Dead-letter 可以自動化處理的錯誤的由 Lambda 重送 其他人工處理後直接送到 Primary Topic 送不出去存 DynamoDB 由 Lambda 重送 Consummers 接收後一樣經過 SDK 去處理 Data governance 符合 Schema validation 就處理 不符合就丟到 Dead-letter Topic ，工人智慧處理 可以快速變更 Schema Cluster autoscaling 這裡比較好玩的是有用到 Step Function 去 Trigger Lambda 做 Partition re-assignment"><meta name=generator content="Hugo 0.105.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="McDonald Event Driven Architecture"><meta property="og:description" content="簡介 麥當勞，就是早餐滿福堡很好吃的那家，不服來辯
Event Driven Architecture 用於哪些系統 mobile-order progress tracking and sending marketing communications
很明顯都是很經典的應用情境，包含點餐進度追蹤和寄送一些商用訊息
Components 比較特別的是他們有工程友善的 SDK 去處理訊息，包括 schema 檢查，訊息寄送，錯誤處理等等
架構 外部訊息經過 Event Gateway 處理權限驗證等 (此處沒有說明怎樣辦到的) 經過驗證的外部訊息以及內部訊息都會打到 Producer 上面 Producer SDK 經過 Schema validation 後送到 Primary Topic 上 沒過送 Dead-letter 可以自動化處理的錯誤的由 Lambda 重送 其他人工處理後直接送到 Primary Topic 送不出去存 DynamoDB 由 Lambda 重送 Consummers 接收後一樣經過 SDK 去處理 Data governance 符合 Schema validation 就處理 不符合就丟到 Dead-letter Topic ，工人智慧處理 可以快速變更 Schema Cluster autoscaling 這裡比較好玩的是有用到 Step Function 去 Trigger Lambda 做 Partition re-assignment"><meta property="og:type" content="article"><meta property="og:url" content="/blog/mcdonald-event-driven-architecture/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-11-08T21:16:20+08:00"><meta property="article:modified_time" content="2022-11-08T21:16:20+08:00"><meta itemprop=name content="McDonald Event Driven Architecture"><meta itemprop=description content="簡介 麥當勞，就是早餐滿福堡很好吃的那家，不服來辯
Event Driven Architecture 用於哪些系統 mobile-order progress tracking and sending marketing communications
很明顯都是很經典的應用情境，包含點餐進度追蹤和寄送一些商用訊息
Components 比較特別的是他們有工程友善的 SDK 去處理訊息，包括 schema 檢查，訊息寄送，錯誤處理等等
架構 外部訊息經過 Event Gateway 處理權限驗證等 (此處沒有說明怎樣辦到的) 經過驗證的外部訊息以及內部訊息都會打到 Producer 上面 Producer SDK 經過 Schema validation 後送到 Primary Topic 上 沒過送 Dead-letter 可以自動化處理的錯誤的由 Lambda 重送 其他人工處理後直接送到 Primary Topic 送不出去存 DynamoDB 由 Lambda 重送 Consummers 接收後一樣經過 SDK 去處理 Data governance 符合 Schema validation 就處理 不符合就丟到 Dead-letter Topic ，工人智慧處理 可以快速變更 Schema Cluster autoscaling 這裡比較好玩的是有用到 Step Function 去 Trigger Lambda 做 Partition re-assignment"><meta itemprop=datePublished content="2022-11-08T21:16:20+08:00"><meta itemprop=dateModified content="2022-11-08T21:16:20+08:00"><meta itemprop=wordCount content="108"><meta itemprop=keywords content="architecture,"><meta name=twitter:card content="summary"><meta name=twitter:title content="McDonald Event Driven Architecture"><meta name=twitter:description content="簡介 麥當勞，就是早餐滿福堡很好吃的那家，不服來辯
Event Driven Architecture 用於哪些系統 mobile-order progress tracking and sending marketing communications
很明顯都是很經典的應用情境，包含點餐進度追蹤和寄送一些商用訊息
Components 比較特別的是他們有工程友善的 SDK 去處理訊息，包括 schema 檢查，訊息寄送，錯誤處理等等
架構 外部訊息經過 Event Gateway 處理權限驗證等 (此處沒有說明怎樣辦到的) 經過驗證的外部訊息以及內部訊息都會打到 Producer 上面 Producer SDK 經過 Schema validation 後送到 Primary Topic 上 沒過送 Dead-letter 可以自動化處理的錯誤的由 Lambda 重送 其他人工處理後直接送到 Primary Topic 送不出去存 DynamoDB 由 Lambda 重送 Consummers 接收後一樣經過 SDK 去處理 Data governance 符合 Schema validation 就處理 不符合就丟到 Dead-letter Topic ，工人智慧處理 可以快速變更 Schema Cluster autoscaling 這裡比較好玩的是有用到 Step Function 去 Trigger Lambda 做 Partition re-assignment"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Lambda</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/ title="Home page">Home</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/blog/ title="Blog page">Blog</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/categories/ title="Categories page">Categories</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">BLOG</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">McDonald Event Driven Architecture</h1><time class="f6 mv4 dib tracked" datetime=2022-11-08T21:16:20+08:00>November 8, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id=簡介>簡介</h2><p>麥當勞，就是早餐滿福堡很好吃的那家，不服來辯</p><h2 id=event-driven-architecture-用於哪些系統>Event Driven Architecture 用於哪些系統</h2><blockquote><p>mobile-order progress tracking and sending marketing communications</p></blockquote><p>很明顯都是很經典的應用情境，包含點餐進度追蹤和寄送一些商用訊息</p><h2 id=components>Components</h2><p><img src=https://miro.medium.com/max/1400/1*P0mtpk5Jk0rBQZuJl7zWIA.png alt=Components></p><p>比較特別的是他們有工程友善的 SDK 去處理訊息，包括 schema 檢查，訊息寄送，錯誤處理等等</p><h2 id=架構>架構</h2><p><img src=https://miro.medium.com/max/1400/1*gCOnmHq4jXNjSX8Jp0NgOA.jpeg alt=Architecture></p><ul><li>外部訊息經過 Event Gateway 處理權限驗證等 (此處沒有說明怎樣辦到的)</li><li>經過驗證的外部訊息以及內部訊息都會打到 Producer 上面</li><li>Producer SDK 經過 Schema validation 後送到 Primary Topic 上<ul><li>沒過送 Dead-letter<ul><li>可以自動化處理的錯誤的由 Lambda 重送</li><li>其他人工處理後直接送到 Primary Topic</li></ul></li><li>送不出去存 DynamoDB<ul><li>由 Lambda 重送</li></ul></li></ul></li><li>Consummers 接收後一樣經過 SDK 去處理</li></ul><h2 id=data-governance>Data governance</h2><p><img src=https://miro.medium.com/max/1400/1*LvV2J6pcNdSjRf0gSA4yAw.jpeg alt=DataGovernance></p><ul><li>符合 Schema validation 就處理</li><li>不符合就丟到 Dead-letter Topic ，工人智慧處理</li><li>可以快速變更 Schema</li></ul><h2 id=cluster-autoscaling>Cluster autoscaling</h2><p><img src=https://miro.medium.com/max/1248/1*0WQ4CpnzhlNthWt4uGLO3g.jpeg alt=ClusterAutoscaling></p><p>這裡比較好玩的是有用到 Step Function 去 Trigger Lambda 做 Partition re-assignment</p><h2 id=domain-based-sharding>Domain-based sharding</h2><p><img src=https://miro.medium.com/max/1400/1*cCR1EaCLRhUKG8AruzJ43g.jpeg alt=DomainSharding></p><p>依照 Domain 去拆分，這邊感覺類似微服務，但又有點不太像，可以想像壞掉時的差異如下</p><ul><li>微服務<ul><li>通知系統壞了但是首頁是好的</li></ul></li><li>Domain sharding<ul><li>點餐進度通知壞了，但是還是有收到廣告通知 (前提：某通知系統 Backend 是好的以及通知系統前端是好的)</li></ul></li></ul><h2 id=refs>Refs</h2><p><a href=https://medium.com/mcdonalds-technical-blog/behind-the-scenes-mcdonalds-event-driven-architecture-51a6542c0d86>Behind the scenes: McDonald’s event-driven architecture</a></p><p><a href=https://medium.com/mcdonalds-technical-blog/mcdonalds-event-driven-architecture-the-data-journey-and-how-it-works-4591d108821f>McDonald’s event-driven architecture: The data journey and how it works</a></p><ul class=pa0><li class="list di"><a href=/tags/architecture/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">architecture</a></li></ul><div class="mt6 instapaper_ignoref"><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//blog-khfo0axv59.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/blog/aws-architecture-halter/>AWS Architecture Study Halter</a></li><li class=mb2><a href=/blog/aws-architecture-mobileye/>AWS Architecture Study Mobileye</a></li><li class=mb2><a href=/blog/aws-architecture-study-buzzdial/>AWS Architecture Study Buzzdial</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=/>&copy; Lambda 2022</a><div><div class=ananke-socials></div></div></div></footer></body></html>